# Finds the largest single directory on a server

function largestdirindir () {
    find $1/* -maxdepth 1 -type d -exec du -s '{}' \; 2>/dev/null|sort -n|tail -n1|awk '{print $2}'
}
function sizeof () { du -s $1|awk '{print $1}'; }
function largestsingledir () {
    last=$(largestdirindir $last)
    while [[ -n $last ]]; do
        next=$(largestdirindir $last)
        diff=$(echo $(sizeof $last)-$(sizeof $next)|bc)
        if [[ $diff -gt $(sizeof $next) ]]; then
            echo $next
            last=$next # Continue down
        else
            echo $next
            return
        fi
    done
}
largestsingledir
